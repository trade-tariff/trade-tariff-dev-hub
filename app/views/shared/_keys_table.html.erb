<%= govuk_table do |table| %>
  <% table.with_head do |head| %>
    <% head.with_row do |row| %>
      <% row.with_cell(text: headers[:description]) %>
      <% row.with_cell(text: headers[:identifier]) %>
      <% row.with_cell(text: 'Secret') %>
      <% row.with_cell(text: 'Status') %>
      <% row.with_cell(text: 'Created') %>
      <% row.with_cell(text: 'Actions') %>
    <% end %>
  <% end %>

  <% table.with_body do |body| %>
    <% keys.each do |key| %>
      <% body.with_row do |row| %>
        <% row.with_cell(header: true, text: key.description) %>
        <% row.with_cell(text: identifier_callable.call(key)) %>
        <% row.with_cell do %>
          <%= render 'shared/masked_secret_toggle', record: key, prefix: secret_prefix %>
        <% end %>
        <% row.with_cell do %>
          <%= status_tag(status_text_callable.call(key), status: status_colour_callable.call(key)) %>
        <% end %>
        <% row.with_cell(text: key.created_at.strftime('%d %b %Y')) %>
        <% row.with_cell do %>
          <%= actions_callable.call(key) %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>

<%= govuk_table do |table| %>
  <% if local_assigns[:caption].present? %>
    <% caption_options = { size: caption[:size], text: caption[:text] }.compact %>
    <% table.with_caption(**caption_options) %>
  <% end %>

  <% table.with_head do |head| %>
    <% head.with_row do |row| %>
      <% row.with_cell(text: 'Invitee') %>
      <% row.with_cell(text: 'Created') %>
      <% row.with_cell(text: 'Status') %>
      <% row.with_cell(text: 'Actions') %>
    <% end %>
  <% end %>

  <% table.with_body do |body| %>
    <% invitations.each do |invitation| %>
      <% body.with_row do |row| %>
        <% row.with_cell(header: true, text: invitation.invitee_email) %>
        <% row.with_cell(text: created_on(invitation)) %>
        <% row.with_cell { invitation_status(invitation) } %>
        <% row.with_cell { invitation_actions_for(invitation) } %>
      <% end %>
    <% end %>
  <% end %>
<% end %>

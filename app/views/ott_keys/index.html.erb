<h1 class="govuk-heading-l">Your OTT API keys</h1>
<p class="govuk-body">Manage all OTT API keys that have been generated for your organisation.</p>

<%= govuk_table do |table|
  table.with_head do |head|
    head.with_row do |row|
      row.with_cell(text: 'Client ID')
      row.with_cell(text: 'Description')
      row.with_cell(text: 'Scopes')
      row.with_cell(text: 'Created on')
      row.with_cell(text: 'Status')
      row.with_cell(text: '')
    end
  end

      @ott_keys.each do |ott_key|
        table.with_body do |body|
          body.with_row do |row|
            row.with_cell(header: true, text: mask_ott_key(ott_key))
            row.with_cell(text: ott_key.description)
            row.with_cell(text: ott_key.scopes.join(', '))
            row.with_cell(text: creation_date(ott_key))
            row.with_cell(text: ott_key_status(ott_key))
            row.with_cell do
              link_to 'Revoke', revoke_ott_key_path(ott_key.id), class: 'govuk-link', data: { confirm: 'Are you sure you want to revoke this OTT key? This action cannot be undone.' }
            end
          end
        end
      end
end %>

<%= govuk_button_link_to('Create new OTT key', new_ott_key_path, secondary: true) %>

<h2 class="govuk-heading-m">If you need help</h2>
<p class="govuk-body">If you have any further queries relating to the developer portal contact:
  <%= mail_to 'hmrc-trade-tariff-support-g@digital.hmrc.gov.uk', 'hmrc-trade-tariff-support-g@digital.hmrc.gov.uk', class: 'govuk-link' %>.
</p>

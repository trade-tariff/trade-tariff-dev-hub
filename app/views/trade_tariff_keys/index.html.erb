<h1 class="govuk-heading-l">Your Trade Tariff API keys</h1>
<p class="govuk-body">Manage all Trade Tariff API keys that have been generated for your organisation.</p>

<%= govuk_table do |table|
  table.with_head do |head|
    head.with_row do |row|
      row.with_cell(text: 'Client ID')
      row.with_cell(text: 'Description')
      row.with_cell(text: 'Scopes')
      row.with_cell(text: 'Created on')
      row.with_cell(text: 'Status')
      row.with_cell(text: '')
    end
  end

  table.with_body do |body|
    @trade_tariff_keys.each do |trade_tariff_key|
      body.with_row do |row|
        row.with_cell(header: true, text: mask_trade_tariff_key(trade_tariff_key))
        row.with_cell(text: trade_tariff_key.description)
        row.with_cell(text: trade_tariff_key.scopes.join(', '))
        row.with_cell(text: creation_date(trade_tariff_key))
        row.with_cell do
          status_tag(trade_tariff_key_status(trade_tariff_key), status: trade_tariff_key.active? ? :active : :revoked)
        end
        row.with_cell do
          if trade_tariff_key.active?
            link_to 'Revoke', revoke_trade_tariff_key_path(trade_tariff_key.id), class: 'govuk-link'
          else
            link_to 'Delete', delete_trade_tariff_key_path(trade_tariff_key.id), class: 'govuk-link'
          end
        end
      end
    end
  end
end %>

<%= govuk_button_link_to('Create new Trade Tariff key', new_trade_tariff_key_path, secondary: true) %>

<h2 class="govuk-heading-m">If you need help</h2>
<p class="govuk-body">If you have any further queries relating to the developer portal contact:
  <%= mail_to 'hmrc-trade-tariff-support-g@digital.hmrc.gov.uk', 'hmrc-trade-tariff-support-g@digital.hmrc.gov.uk', class: 'govuk-link' %>.
</p>
